---

title: Downloader


keywords: fastai
sidebar: home_sidebar

summary: "The module that handles the actual downloading."
description: "The module that handles the actual downloading."
nb_path: "00_downloader.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_downloader.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="loadJson" class="doc_header"><code>loadJson</code><a href="https://github.com/hgzech/aat_downloader/tree/master/aat_downloader/downloader.py#L13" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>loadJson</code>(<strong><code>path</code></strong>, <strong><code>default</code></strong>=<em><code>{}</code></em>)</p>
</blockquote>
<p>Return dictionary from json file.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="saveJson" class="doc_header"><code>saveJson</code><a href="https://github.com/hgzech/aat_downloader/tree/master/aat_downloader/downloader.py#L25" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>saveJson</code>(<strong><code>data</code></strong>, <strong><code>path</code></strong>)</p>
</blockquote>
<p>Save dictionary as json file.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Downloader" class="doc_header"><code>class</code> <code>Downloader</code><a href="https://github.com/hgzech/aat_downloader/tree/master/aat_downloader/downloader.py#L31" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Downloader</code>(<strong><code>google_services_path</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">downloader</span> <span class="o">=</span> <span class="n">Downloader</span><span class="p">(</span><span class="s1">&#39;data/external/google-services.json&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">downloader</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;eeg&quot;</span><span class="p">,</span> <span class="s2">&quot;data/raw&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Getting pps for: eeg
Syncing kvik5tup
Syncing kvirvl61
Syncing kvishxm0
Syncing kvit5ufl
Syncing kvjyk7x2
Syncing kvl2v5tn
Syncing kvl2y3z9
Syncing kvl2yegg
Syncing kvl3mj83
Syncing kvl4eoxj
Syncing kvl769wk
Syncing kvlb3c0c
Syncing kvlid4mp
Syncing kvmhuonv
Syncing kvmhvpth
Syncing kvmp0w6f
Syncing kvmywtl4
Syncing kvpdlfr5
Syncing kvpg7l7x
Syncing kvpgyztj
Syncing kvr2hmrg
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">KeyboardInterrupt</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">/var/folders/16/2wxbnpk5321f8g40bxf0ht_h0000gn/T/ipykernel_10733/389498639.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>downloader<span class="ansi-blue-fg">.</span>download<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;eeg&#34;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;data/raw&#34;</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">/var/folders/16/2wxbnpk5321f8g40bxf0ht_h0000gn/T/ipykernel_10733/2776477214.py</span> in <span class="ansi-cyan-fg">download</span><span class="ansi-blue-fg">(self, experiment, storage_dir)</span>
<span class="ansi-green-intense-fg ansi-bold">     52</span>             path <span class="ansi-blue-fg">=</span> os<span class="ansi-blue-fg">.</span>path<span class="ansi-blue-fg">.</span>join<span class="ansi-blue-fg">(</span>storage_dir<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;%s.json&#34;</span><span class="ansi-blue-fg">%</span>pp<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     53</span>             print<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;Syncing %s&#34;</span> <span class="ansi-blue-fg">%</span>pp<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">---&gt; 54</span><span class="ansi-red-fg">             </span>participant <span class="ansi-blue-fg">=</span> dict<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>db<span class="ansi-blue-fg">.</span>child<span class="ansi-blue-fg">(</span>experiment<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>child<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;pps/%s&#34;</span> <span class="ansi-blue-fg">%</span> <span class="ansi-blue-fg">(</span>pp<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>get<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>val<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     55</span>             participant<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;participantId&#39;</span><span class="ansi-blue-fg">]</span> <span class="ansi-blue-fg">=</span> pp
<span class="ansi-green-intense-fg ansi-bold">     56</span>             participant<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;experiment&#39;</span><span class="ansi-blue-fg">]</span> <span class="ansi-blue-fg">=</span> experiment

<span class="ansi-green-fg">~/opt/miniconda3/envs/aat_downloader/lib/python3.8/site-packages/pyrebase/pyrebase.py</span> in <span class="ansi-cyan-fg">get</span><span class="ansi-blue-fg">(self, token, json_kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    263</span>         request_object <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>requests<span class="ansi-blue-fg">.</span>get<span class="ansi-blue-fg">(</span>request_ref<span class="ansi-blue-fg">,</span> headers<span class="ansi-blue-fg">=</span>headers<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    264</span>         raise_detailed_error<span class="ansi-blue-fg">(</span>request_object<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 265</span><span class="ansi-red-fg">         </span>request_dict <span class="ansi-blue-fg">=</span> request_object<span class="ansi-blue-fg">.</span>json<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">**</span>json_kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    266</span> 
<span class="ansi-green-intense-fg ansi-bold">    267</span>         <span class="ansi-red-fg"># if primitive or simple query return</span>

<span class="ansi-green-fg">~/opt/miniconda3/envs/aat_downloader/lib/python3.8/site-packages/requests/models.py</span> in <span class="ansi-cyan-fg">json</span><span class="ansi-blue-fg">(self, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    824</span>                     <span class="ansi-red-fg"># used.</span>
<span class="ansi-green-intense-fg ansi-bold">    825</span>                     <span class="ansi-green-fg">pass</span>
<span class="ansi-green-fg">--&gt; 826</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> complexjson<span class="ansi-blue-fg">.</span>loads<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>text<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    827</span> 
<span class="ansi-green-intense-fg ansi-bold">    828</span>     <span class="ansi-blue-fg">@</span>property

<span class="ansi-green-fg">~/opt/miniconda3/envs/aat_downloader/lib/python3.8/json/__init__.py</span> in <span class="ansi-cyan-fg">loads</span><span class="ansi-blue-fg">(s, cls, object_hook, parse_float, parse_int, parse_constant, object_pairs_hook, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">    355</span>             parse_int <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span> <span class="ansi-green-fg">and</span> parse_float <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span> <span class="ansi-green-fg">and</span>
<span class="ansi-green-intense-fg ansi-bold">    356</span>             parse_constant is None and object_pairs_hook is None and not kw):
<span class="ansi-green-fg">--&gt; 357</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> _default_decoder<span class="ansi-blue-fg">.</span>decode<span class="ansi-blue-fg">(</span>s<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    358</span>     <span class="ansi-green-fg">if</span> cls <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    359</span>         cls <span class="ansi-blue-fg">=</span> JSONDecoder

<span class="ansi-green-fg">~/opt/miniconda3/envs/aat_downloader/lib/python3.8/json/decoder.py</span> in <span class="ansi-cyan-fg">decode</span><span class="ansi-blue-fg">(self, s, _w)</span>
<span class="ansi-green-intense-fg ansi-bold">    335</span> 
<span class="ansi-green-intense-fg ansi-bold">    336</span>         &#34;&#34;&#34;
<span class="ansi-green-fg">--&gt; 337</span><span class="ansi-red-fg">         </span>obj<span class="ansi-blue-fg">,</span> end <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>raw_decode<span class="ansi-blue-fg">(</span>s<span class="ansi-blue-fg">,</span> idx<span class="ansi-blue-fg">=</span>_w<span class="ansi-blue-fg">(</span>s<span class="ansi-blue-fg">,</span> <span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>end<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    338</span>         end <span class="ansi-blue-fg">=</span> _w<span class="ansi-blue-fg">(</span>s<span class="ansi-blue-fg">,</span> end<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>end<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    339</span>         <span class="ansi-green-fg">if</span> end <span class="ansi-blue-fg">!=</span> len<span class="ansi-blue-fg">(</span>s<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">~/opt/miniconda3/envs/aat_downloader/lib/python3.8/json/decoder.py</span> in <span class="ansi-cyan-fg">raw_decode</span><span class="ansi-blue-fg">(self, s, idx)</span>
<span class="ansi-green-intense-fg ansi-bold">    351</span>         &#34;&#34;&#34;
<span class="ansi-green-intense-fg ansi-bold">    352</span>         <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 353</span><span class="ansi-red-fg">             </span>obj<span class="ansi-blue-fg">,</span> end <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>scan_once<span class="ansi-blue-fg">(</span>s<span class="ansi-blue-fg">,</span> idx<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    354</span>         <span class="ansi-green-fg">except</span> StopIteration <span class="ansi-green-fg">as</span> err<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    355</span>             <span class="ansi-green-fg">raise</span> JSONDecodeError<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;Expecting value&#34;</span><span class="ansi-blue-fg">,</span> s<span class="ansi-blue-fg">,</span> err<span class="ansi-blue-fg">.</span>value<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">from</span> <span class="ansi-green-fg">None</span>

<span class="ansi-red-fg">KeyboardInterrupt</span>: </pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

